{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagramme de Flux de DonnÃ©es - Covoiturage UAC</title>
    <link rel="stylesheet" href="{% static 'css/diag.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>

    <header class="en-tete">
        <h1>Diagramme de Flux de DonnÃ©es (DFD)</h1>
    
    </header>

    <main class="conteneur-principal">
        <div class="legende">
            <div><span class="legende-carre entite"></span> EntitÃ© Externe</div>
            <div><span class="legende-carre processus"></span> Processus</div>
            <div><span class="legende-carre magasin"></span> Magasin de DonnÃ©es</div>
        </div>

        <div class="diagramme-conteneur">
            <div class="colonne">
                <h2>EntitÃ©s</h2>
                <div class="boite entite" id="utilisateur">
                    <i class="icone">ðŸ‘¤</i>
                    <strong>Utilisateur</strong>
                    <small>(Conducteur / Passager)</small>
                </div>
            </div>

            <div class="colonne">
                <h2>Processus MÃ©tier</h2>
                <div class="boite processus" id="p1" 
                     data-titre="1. GÃ©rer le Compte Utilisateur"
                     data-details="L'utilisateur fournit ses informations pour s'inscrire ou se connecter. Le systÃ¨me valide les donnÃ©es , vÃ©rifie les doublons , crÃ©e les enregistrements  ou authentifie l'utilisateur existant."
                     data-flux-entrants="Infos d'inscription (nom, email, etc.), Identifiants de connexion."
                     [cite_start]data-flux-sortants="Message de succÃ¨s/erreur, Session utilisateur, Redirection vers le tableau de bord.">
                    <i class="icone">ðŸ”‘</i>
                    <span>1. GÃ©rer le Compte</span>
                </div>
                <div class="boite processus" id="p2"
                     data-titre="2. GÃ©rer les Trajets"
                     [cite_start]data-details="Permet aux conducteurs de publier des offres  et aux passagers de poster des demandes de covoiturage. Le systÃ¨me enregistre les dÃ©tails du trajet spÃ©cifiÃ©s par l'utilisateur."
                     data-flux-entrants="Formulaire d'offre (dÃ©part, arrivÃ©e, places, prix), Formulaire de demande (dÃ©part, arrivÃ©e, heure souhaitÃ©e)."
                     data-flux-sortants="Confirmation de publication, Nouvelles offres/demandes dans la base de donnÃ©es.">
                     <i class="icone">ðŸš—</i>
                    <span>2. GÃ©rer les Trajets</span>
                </div>
                <div class="boite processus" id="p3"
                     data-titre="3. Trouver des Correspondances"
                     data-details="Le systÃ¨me recherche automatiquement des correspondances. Pour un passager, il cherche des offres compatibles. Pour un conducteur, il cherche des demandes correspondantes. Un objet 'Matching' est crÃ©Ã© si une correspondance est trouvÃ©e."
                     data-flux-entrants="DÃ©clenchement automatique ou par l'utilisateur."
                     data-flux-sortants="Liste de correspondances (matchs), CrÃ©ation d'enregistrements 'Matching'.">
                     <i class="icone">ðŸ”„</i>
                    <span>3. Trouver des Correspondances</span>
                </div>
                <div class="boite processus" id="p4"
                     data-titre="4. GÃ©rer la Messagerie"
                     [cite_start]data-details="Lorsqu'un utilisateur veut contacter un autre, le systÃ¨me vÃ©rifie si une conversation existe  ou en crÃ©e une nouvelle. Les messages envoyÃ©s sont ajoutÃ©s Ã  la conversation."
                     data-flux-entrants="ID de l'utilisateur Ã  contacter, Contenu du message."
                     data-flux-sortants="Nouvelle conversation, Nouveau message, Interface de chat.">
                     <i class="icone">ðŸ’¬</i>
                    <span>4. GÃ©rer la Messagerie</span>
                </div>
                 <div class="boite processus" id="p5"
                     data-titre="5. Consulter le Tableau de Bord"
                     [cite_start]data-details="AprÃ¨s la connexion, le systÃ¨me rÃ©cupÃ¨re et affiche les informations pertinentes pour le rÃ´le de l'utilisateur : offres/demandes rÃ©centes , publications personnelles, et conversations."
                     data-flux-entrants="Session de l'utilisateur authentifiÃ©."
                     data-flux-sortants="Vue personnalisÃ©e du tableau de bord avec listes d'offres, de demandes et de conversations.">
                     <i class="icone">ðŸ“Š</i>
                    <span>5. Consulter le Tableau de Bord</span>
                </div>
            </div>

            <div class="colonne">
                <h2>Magasins de DonnÃ©es (BDD)</h2>
                <div class="boite magasin" id="d1">
                    <i class="icone">ðŸ’¾</i>
                    <span>Utilisateur & Profil</span>
                </div>
                <div class="boite magasin" id="d2">
                    <i class="icone">ðŸ’¾</i>
                    <span>VÃ©hicules</span>
                </div>
                <div class="boite magasin" id="d3">
                    <i class="icone">ðŸ’¾</i>
                    <span>Offres de Covoiturage</span>
                </div>
                <div class="boite magasin" id="d4">
                    <i class="icone">ðŸ’¾</i>
                    <span>Demandes de Covoiturage</span>
                </div>
                <div class="boite magasin" id="d5">
                    <i class="icone">ðŸ’¾</i>
                    <span>Matchings</span>
                </div>
                <div class="boite magasin" id="d6">
                    <i class="icone">ðŸ’¾</i>
                    <span>Conversations & Messages</span>
                </div>
            </div>
            
            <svg class="connecteurs"></svg>
        </div>
    </main>

    <div id="modale" class="modale-superposition">
        <div class="modale-contenu">
            <span class="modale-fermer">&times;</span>
            <h3 id="modale-titre">Titre du Processus</h3>
            <div id="modale-details">
                <h4>Description</h4>
                <p id="details-p"></p>
                <h4>Flux de DonnÃ©es Entrants</h4>
                <p id="flux-entrants-p"></p>
                <h4>Flux de DonnÃ©es Sortants</h4>
                <p id="flux-sortants-p"></p>
            </div>
        </div>
    </div>

    <script src="{% static 'js/diag.js' %}"></script>
</body>
</html>